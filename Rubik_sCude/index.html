<!DOCTTYPE html>
    <html>

    <head>
        <meta charset="utf-8">
        <title></title>
        <style>
            * {
                margin: 0;
                padding: 0;
            }

            body {
                overflow: hidden;
            }

            #wrap {
                width: 100vw;
                height: 100vh;
                display: flex;
                perspective: 8000px;

            }

            #content {
                transform-style: preserve-3d;
                position: relative;
                /* border: 1px solid #ff0000; */
                margin: auto;

            }

            #content>div {
                transform-style: preserve-3d;
                position: absolute;
                top: 0;
                left: 0;
                /* transition: 0.2s; */
                transform-origin: 150px 150px -100px;
            }

            #content>div>p {
                border: 2px solid #000000;
                box-sizing: border-box;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
            }

            #button {
                box-sizing: border-box;
                position: relative;
                margin: auto;
            }

            #button>input {
                position: absolute;
                /* margin: auto; */
            }
        </style>
        <script src="vue.js" type="text/javascript" charset="utf-8"></script>
    </head>

    <body>
        <div id="wrap">
            <div id="content" :style="{
                width: (count*side) + 'px',
                height: (count*side) + 'px',
                <!-- 'transform-origin': (count*side/2)+'px ' + (count*side/2) + 'px - ' + (count*side/2) + 'px', -->
                'transform': 'rotateX(' + contentrotate.x +'deg) rotateY(' + contentrotate.y +'deg)',
                'transition': transition + 's'
            }">

                <div v-for="block in blocks" :x="block.x" :y="block.y" :z="block.z" :style="{
                    width: side+'px',
                    height: side+'px',
                    'transform-origin': side*count/2 + 'px' 
                                      + side*count/2 + 'px -' 
                                      + side*count/3 + 'px',
                    'transform':    'rotateX('+ block.rotate.x + 'deg) '
                                + 'rotateY('+ block.rotate.y + 'deg) ' 

                                + 'rotateZ('+ block.rotate.z + 'deg) '
                                + 'translateX(' + (side*block.x) 
                                + 'px) translateY('  + (side*block.y) 
                                + 'px) translateZ(-' + (side*block.z) + 'px)',
                    'transition': transition + 's'
                }">
                    <p v-for="area in block.areas" :class="area.direct" :style="{
                            transform: area.transform,
                            background: area.color 
                       }">
                    </p>
                </div>
            </div>
            <div id=button>
                <input type="button" value="U" :style="{
                    transform: 'translate(-200px, 200px)',
                        width: '80',
                        height: '80',
                        'font-size': '40'
                }" @click="Rotate('U')" />

                <input type="button" value="U'" :style="{
                    transform: 'translate(-100px, 200px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('U_')" />

                <input type="button" value="F" :style="{
                    transform: 'translate(-200px, 300px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('F')" />

                <input type="button" value="F'" :style="{
                    transform: 'translate(-100px, 300px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('F_')" />

                <input type="button" value="R" :style="{
                    transform: 'translate(0px, 300px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('R')" />

                <input type="button" value="R'" :style="{
                    transform: 'translate(0px, 400px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('R_')" />

                <input type="button" value="L" :style="{
                    transform: 'translate(-300px, 400px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('L')" />

                <input type="button" value="L'" :style="{
                    transform: 'translate(-300px, 300px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('L_')" />

                <input type="button" value="D" :style="{
                    transform: 'translate(-200px, 500px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('D')" />

                <input type="button" value="D'" :style="{
                    transform: 'translate(-100px, 500px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('D_')" />

                <input type="button" value="B" :style="{
                    transform: 'translate(-100px, 400px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('B')" />

                <input type="button" value="B'" :style="{
                    transform: 'translate(-200px, 400px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('B_')" />

                <input type="button" value="x'" :style="{
                    transform: 'translate(-100px, -100px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('x_')" />

                <input type="button" value="x" :style="{
                    transform: 'translate(-100px, -300px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('x')" />

                <input type="button" value="y'" :style="{
                    transform: 'translate(-200px, -200px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('y_')" />

                <input type="button" value="y" :style="{
                    transform: 'translate(0px, -200px)',
                    width: '80',
                    height: '80',
                    'font-size': '40'
                }" @click="Rotate('y')" />

                <input type="button" value="Solve" :style="{
                    transform: 'translate(-800px, 500px)',
                    width: '200',
                    height: '80',
                    'font-size': '40'
                }" @click="Solve()" />

                <input type="button" value="Start" :style="{
                    transform: 'translate(-800px, 400px)',
                    width: '200',
                    height: '80',
                    'font-size': '40'
                }" @click="Start()" />
            </div>
        </div>
        <script>
            new Vue({
                el: '#wrap',
                data() {
                    return {
                        count: 3,
                        side: 100,
                        blocks: [],
                        contentrotate: {
                            x: - 30,
                            y: -30
                        },
                        transition: 0,
                        prisms: {
                            x: 0,
                            y: 0,
                            z: 0,
                            direct: 'face'
                        },
                        corner: {
                            x: 0,
                            y: 0,
                            z: 0,
                            direct: 'face'
                        },
                        delay: 0,

                        duration: ''
                    }
                },
                created() {
                    this.getBlocks()
                    // console.log(this.blocks)
                    document.onkeydown = (event) => {
                        //y'
                        this.Rotate(this.getOperation(event.keyCode))
                    }
                },
                methods: {
                    Notation(String) {
                        this.duration += String
                        for (let i = 0; i < String.length; i++) {
                            if (i < String.length - 1 && String[i + 1] === '_') {
                                this.Rotate(String[i] + '_')
                                i++
                            } else this.Rotate(String[i])
                        }
                    },

                    getTargetDirect(TargetColor) {
                        for (let i = 0; i < this.blocks.length; i++) {
                            if (this.blocks[i].areas.length === 1 && this.blocks[i].areas[0].color === TargetColor)
                                return this.blocks[i].areas[0].direct
                        }
                    },

                    positioning(TargetColor) {
                        direct = this.getTargetDirect(TargetColor)
                        if (TargetColor === 'white') {
                            if (direct === 'up') {
                                this.Notation('x_x_')
                            } else if (direct === 'face') {
                                this.Notation('x')
                            } else if (direct === 'back') {
                                this.Notation('x_')
                            } else if (direct === 'left') {
                                this.Notation('yx_')
                            } else if (direct === 'right') {
                                this.Notation('y_x_')
                            }
                        }
                        else {
                            if (direct === 'back') {
                                this.Notation('yy')
                            } else if (direct === 'left') {
                                this.Notation('y_')
                            } else if (direct === 'right') {
                                this.Notation('y')
                            }
                        }
                    },

                    getPrisms(TargetColor1, TargetColor2) {
                        //return: x, y, z, direct
                        for (let i = 0; i < this.blocks.length; i++) {
                            if (this.blocks[i].areas.length === 2) {
                                color1 = this.blocks[i].areas[0].color
                                color2 = this.blocks[i].areas[1].color
                                if (color1 === TargetColor1 && color2 === TargetColor2) {
                                    this.prisms.x = this.blocks[i].x
                                    this.prisms.y = this.blocks[i].y
                                    this.prisms.z = this.blocks[i].z
                                    this.prisms.direct = this.blocks[i].areas[0].direct
                                }
                                if (color2 === TargetColor1 && color1 === TargetColor2) {
                                    this.prisms.x = this.blocks[i].x
                                    this.prisms.y = this.blocks[i].y
                                    this.prisms.z = this.blocks[i].z
                                    this.prisms.direct = this.blocks[i].areas[1].direct
                                }
                            }
                        }
                    },

                    getCorner(TargetColor1, TargetColor2, TargetColor3) {
                        var TargetColors = []
                        TargetColors.push(TargetColor1)
                        TargetColors.push(TargetColor2)
                        TargetColors.push(TargetColor3)
                        TargetColors.sort()
                        for (let i = 0; i < this.blocks.length; i++) {
                            if (this.blocks[i].areas.length === 3) {
                                var colors = []
                                var color1 = this.blocks[i].areas[0].color
                                var color2 = this.blocks[i].areas[1].color
                                var color3 = this.blocks[i].areas[2].color
                                colors.push(color1)
                                colors.push(color2)
                                colors.push(color3)
                                colors.sort()
                                TargetColors.sort()
                                if (colors[0] === TargetColors[0]
                                    && colors[1] === TargetColors[1]
                                    && colors[2] === TargetColors[2]) {
                                    this.corner.x = this.blocks[i].x
                                    this.corner.y = this.blocks[i].y
                                    this.corner.z = this.blocks[i].z
                                    if (TargetColor1 === color1) { this.corner.direct = this.blocks[i].areas[0].direct }
                                    else if (TargetColor1 === color2) { this.corner.direct = this.blocks[i].areas[1].direct }
                                    else if (TargetColor1 === color3) { this.corner.direct = this.blocks[i].areas[2].direct }
                                    return
                                }
                            }
                        }
                    },

                    Make_Cross(num) {
                        const colors = {
                            1: 'blue',
                            2: 'red',
                            3: 'green',
                            4: 'orange'
                        }

                        var TargetColor = colors[num]
                        this.positioning(TargetColor)
                        this.getPrisms('white', TargetColor)
                        var x = this.prisms.x
                        var y = this.prisms.y
                        var z = this.prisms.z
                        var direct = this.prisms.direct

                        if (x === 1 && y === 2 && z === 0 && direct === 'down')
                            return
                        if (y === 2) {//bottom
                            if (x === 1 && z === 2) this.Notation('BBUU')
                            else if (x === 0 && z === 1) this.Notation('LLU_')
                            else if (x === 1 && z === 0) this.Notation('FF')
                            else if (x === 2 && z === 1) this.Notation('RRU')
                        } else if (y === 1) {//middle
                            if (x === 0 && z === 0) { this.Notation('L_U_L') }
                            if (x === 0 && z === 2) { this.Notation('LU_L_') }
                            if (x === 2 && z === 0) { this.Notation('RUR_') }
                            if (x === 2 && z === 2) { this.Notation('R_UR') }
                        } else {
                            if (x === 1 && z === 2) { this.Notation('UU') }
                            else if (x === 0 && z === 1) { this.Notation('U_') }
                            else if (x === 2 && z === 1) { this.Notation('U') }
                        }

                        //top
                        this.getPrisms('white', TargetColor)
                        if (this.prisms.direct === 'face') this.Notation('U_R_FR')
                        else if (this.prisms.direct === 'up') this.Notation('FF')
                    },

                    Make_Corner(num) {
                        const colors = {
                            1: 'blue',
                            2: 'red',
                            3: 'green',
                            4: 'orange',
                            5: 'blue'
                        }


                        var TargetColor = colors[num]
                        var MinorColor = colors[num + 1]
                        this.positioning(TargetColor)
                        this.getCorner('white', TargetColor, MinorColor)
                        var x = this.corner.x
                        var y = this.corner.y
                        var z = this.corner.z
                        var direct = this.prisms.direct

                        if (x === 2 && y === 2 && z === 0 && direct === 'down')
                            return
                        if (y === 2) {
                            if (x === 0 && z === 2) { this.Notation('LUL_U') }
                            else if (x === 2 && z === 2) { this.Notation('R_URU') }
                            else if (x === 0 && z === 0) { this.Notation('L_U_L') }
                            else if (x === 2 && z === 0) { this.Notation('RU_R_') }
                        } else if (y === 0) {
                            if (x === 0 && z === 2) { this.Notation('UU') }
                            else if (x === 2 && z === 2) { this.Notation('U') }
                            else if (x === 0 && z === 0) { this.Notation('U_') }
                        }

                        this.getCorner('white', TargetColor, MinorColor)
                        var direct = this.corner.direct
                        if (direct === 'face') { this.Notation('F_U_F') }
                        else if (direct === 'up') { this.Notation('URUUR_F_U_F') }
                        else if (direct === 'right') { this.Notation('RUR_') }
                        //
                    },

                    Middle_Layer(num) {
                        const algorithm1 = 'URU_R_U_F_UF'
                        const algorithm2 = 'UUF_UFURU_R_'

                        const colors = {
                            1: 'blue',
                            2: 'red',
                            3: 'green',
                            4: 'orange',
                            5: 'blue'
                        }
                        var TargetColor = colors[num]
                        var MinorColor = colors[num + 1]
                        this.positioning(TargetColor)
                        this.getPrisms(TargetColor, MinorColor)
                        var x = this.prisms.x
                        var y = this.prisms.y
                        var z = this.prisms.z
                        var direct = this.prisms.direct

                        if (x === 2 && y === 1 && z === 0 && direct === 'face') { return }
                        if (y === 1) {
                            if (x === 0 && z === 0) { this.Notation('y_' + algorithm1 + 'yU') }
                            else if (x === 2 && z === 0) { this.Notation(algorithm1 + 'UU') }
                            else if (x === 2 && z === 2) { this.Notation('y' + algorithm1 + 'y_U_') }
                            else if (x === 0 && z === 2) { this.Notation('yy' + algorithm1 + 'yy') }
                        } else if (y === 0) {
                            if (x === 1 && z === 2) { this.Notation('UU') }
                            else if (x === 2 && z === 1) { this.Notation('U') }
                            else if (x === 0 && z === 1) { this.Notation('U_') }
                        }

                        this.getPrisms(TargetColor, MinorColor)
                        var direct = this.prisms.direct
                        if (direct === 'face') { this.Notation(algorithm1) }
                        else if (direct === 'up') { this.Notation(algorithm2) }
                    },


                    Top_Cross() {
                        const algorithm1 = 'FRUR_U_F_'
                        const algorithm2 = 'FRUR_U_RUR_U_F_'
                        const colors = {
                            1: 'blue',
                            2: 'red',
                            3: 'green',
                            4: 'orange',
                        }
                        var transverse = 0
                        var longitudinal = 0
                        var left = false
                        var face = false
                        var right = false
                        var back = false
                        for (let i = 1; i <= 4; i++) {
                            this.getPrisms('yellow', colors[i])
                            if (this.prisms.direct === 'left') { transverse++, left = true }
                            else if (this.prisms.direct === 'right') { transverse++, right = true }
                            else if (this.prisms.direct === 'face') { longitudinal++, face = true }
                            else if (this.prisms.direct === 'back') { longitudinal++, back = true }
                        }
                        if (transverse === 0 && longitudinal === 0) { return }
                        if (transverse === 2 && longitudinal === 0) { this.Notation('U' + algorithm1) }
                        else if (transverse === 0 && longitudinal === 2) { this.Notation(algorithm1) }
                        else if (transverse === 1 && longitudinal === 1) {
                            if (left && face) { this.Notation('U_' + algorithm2) }
                            else if (face && right) { this.Notation(algorithm2) }
                            else if (right && back) { this.Notation('U' + algorithm2) }
                            else if (back && left) { this.Notation('UU' + algorithm2) }
                        }
                        else if (transverse === 2 && longitudinal === 2)
                            this.Notation(algorithm2 + 'U' + algorithm1)
                    },

                    OLL() {
                        const colors = {
                            1: 'blue',
                            2: 'red',
                            3: 'green',
                            4: 'orange',
                            5: 'blue'
                        }
                        var up = 0, face = 0, right = 0
                        var TopCornerDirect = { 0: 'up', 1: 'up', 2: 'up', 3: 'up', }
                        for (let i = 1; i <= 4; i++) {
                            this.getCorner('yellow', colors[i], colors[i + 1])
                            var x = this.corner.x
                            var z = this.corner.z
                            var direct = this.corner.direct
                            if (direct === 'up') { up++ }
                            else if (x === 2 && z === 0)
                                if (direct === 'face') TopCornerDirect[0] = 'face', face++
                                else TopCornerDirect[0] = 'right', right++
                            else if (x === 2 && z === 2)
                                if (direct === 'right') TopCornerDirect[1] = 'face', face++
                                else TopCornerDirect[1] = 'right', right++
                            else if (x === 0 && z === 2)
                                if (direct === 'back') TopCornerDirect[2] = 'face', face++
                                else TopCornerDirect[2] = 'right', right++
                            else if (x === 0 && z === 0)
                                if (direct === 'left') TopCornerDirect[3] = 'face', face++
                                else TopCornerDirect[3] = 'right', right++
                        }
                        //fish
                        if (up === 1) {
                            //OLL1
                            if (face === 3) {
                                const algorithm = 'R_UURUR_UR'
                                if (TopCornerDirect[0] === 'up') this.Notation(algorithm)
                                else if (TopCornerDirect[1] === 'up') this.Notation('U' + algorithm)
                                else if (TopCornerDirect[2] === 'up') this.Notation('UU' + algorithm)
                                else if (TopCornerDirect[3] === 'up') this.Notation('U_' + algorithm)
                            }
                            //OLL2
                            else if (right === 3) {
                                const algorithm = 'RUUR_U_RU_R_'
                                if (TopCornerDirect[0] === 'up') this.Notation('U_' + algorithm)
                                else if (TopCornerDirect[1] === 'up') this.Notation(algorithm)
                                else if (TopCornerDirect[2] === 'up') this.Notation('U' + algorithm)
                                else if (TopCornerDirect[3] === 'up') this.Notation('UU' + algorithm)
                            }
                        }
                        //cross
                        else if (up === 0) {
                            var oll3 = false
                            for (let i = 0; i < 4; i++) {
                                if (TopCornerDirect[i] === TopCornerDirect[(i + 1) % 4]) {
                                    oll3 = true
                                    break
                                }
                            }
                            //OLL3
                            if (oll3) {
                                const algorithm = 'RUURRU_RRU_RRUUR'
                                if (TopCornerDirect[0] === 'face' && TopCornerDirect[1] === 'right') this.Notation(algorithm)
                                else if (TopCornerDirect[1] === 'face' && TopCornerDirect[2] === 'right') this.Notation('U' + algorithm)
                                else if (TopCornerDirect[2] === 'face' && TopCornerDirect[3] === 'right') this.Notation('UU' + algorithm)
                                else if (TopCornerDirect[3] === 'face' && TopCornerDirect[0] === 'right') this.Notation('U_' + algorithm)
                            }
                            //OLL4
                            else {
                                const algorithm = 'RUUR_U_RUR_U_RU_R_'
                                if (TopCornerDirect[0] === 'face') this.Notation(algorithm)
                                else this.Notation('U' + algorithm)
                            }
                        }
                        //Double_Fish
                        else if (up === 2) {
                            var i = 0
                            for (i = 0; i < 4 && TopCornerDirect[i] != 'face'; i++) { }
                            //OLL5
                            if (TopCornerDirect[(i + 3) % 4] === 'right') {
                                const algorithm = 'RRD_RUUR_DRUUR'
                                if(TopCornerDirect[0] === 'face') this.Notation('UU' + algorithm)
                                else if(TopCornerDirect[1] === 'face') this.Notation('U_' + algorithm)
                                else if(TopCornerDirect[2] === 'face') this.Notation(algorithm)
                                else if(TopCornerDirect[3] === 'face') this.Notation('U' + algorithm)
                            }
                            //OLL6
                            if (TopCornerDirect[(i + 2) % 4] === 'right') {
                                const algorithm = 'F_x_LUR_U_xL_FR'
                                if(TopCornerDirect[0] === 'face') this.Notation(algorithm)
                                else if(TopCornerDirect[1] === 'face') this.Notation('U' + algorithm)
                                else if(TopCornerDirect[2] === 'face') this.Notation('UU' + algorithm)
                                else if(TopCornerDirect[3] === 'face') this.Notation('U_' + algorithm)
                             }
                            //OLL7
                            if (TopCornerDirect[(i + 1) % 4] === 'right') {
                                const algorithm = 'x_LUR_U_xL_FRF_'
                                if(TopCornerDirect[0] === 'face') this.Notation('UU' + algorithm)
                                else if(TopCornerDirect[1] === 'face') this.Notation('U_' + algorithm)
                                else if(TopCornerDirect[2] === 'face') this.Notation(algorithm)
                                else if(TopCornerDirect[3] === 'face') this.Notation('U' + algorithm)
                             }
                        }
                    },

                    Solve() {
                        //positioning
                        this.positioning('white')
                        for (let i = 1; i <= 4; i++) this.Make_Cross(i)
                        for (let i = 1; i <= 4; i++) this.Make_Corner(i)
                        for (let i = 1; i <= 4; i++) { this.Middle_Layer(i) }

                        this.Top_Cross()
                        this.OLL()
                        // console.log(this.duration)
                    },

                    Start() {
                        this.Notation('DU_F_R_ B_DDL_R_B_U_L_D_U_FDF_D_FLBF_R_D_L_R_')
                    },

                    getOperation(keycode) {
                        const operation = {
                            74: 'U',
                            70: 'U_',
                            85: 'F',
                            82: 'F_',
                            83: 'D',
                            76: 'D_',
                            86: 'L',
                            65: 'L_',
                            186: 'R',
                            78: 'R_',
                            88: 'B',
                            190: 'B_',
                            37: 'y_',
                            38: 'x',
                            39: 'y',
                            40: 'x_',
                        }

                        return operation[keycode]
                    },

                    Rotate(Operation) {
                        //UP
                        if (Operation === 'U') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].y === 0) {
                                    this.transition = 0
                                    const oldx = this.blocks[i].x
                                    this.blocks[i].x = this.blocks[i].z
                                    this.blocks[i].z = 2 - oldx
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'left' }
                                        else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'right' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.y += 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.y -= 90
                                    }, this.delay)
                                }
                                var x = this.prisms.x
                                var y = this.prisms.y
                                var z = this.prisms.z
                                var direct = this.prisms.direct
                            }
                        }

                        //U'
                        else if (Operation === 'U_') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].y === 0) {
                                    this.transition = 0
                                    const oldz = this.blocks[i].z
                                    this.blocks[i].z = this.blocks[i].x
                                    this.blocks[i].x = 2 - oldz
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'right' }
                                        else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'left' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.y -= 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.y += 90
                                    }, this.delay)
                                }
                            }
                        }

                        //Left
                        else if (Operation === 'L') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].x === 0) {
                                    this.transition = 0
                                    const oldz = this.blocks[i].z
                                    this.blocks[i].z = this.blocks[i].y
                                    this.blocks[i].y = 2 - oldz
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'down' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'up' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.x += 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.x -= 90
                                    }, this.delay)
                                }
                            }
                        }

                        //L'
                        else if (Operation === 'L_') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].x === 0) {
                                    this.transition = 0
                                    const oldy = this.blocks[i].y
                                    this.blocks[i].y = this.blocks[i].z
                                    this.blocks[i].z = 2 - oldy
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'up' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'down' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.x -= 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.x += 90
                                    }, this.delay)
                                }
                            }
                        }

                        //Rright
                        else if (Operation === 'R') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].x === 2) {
                                    this.transition = 0
                                    const oldy = this.blocks[i].y
                                    this.blocks[i].y = this.blocks[i].z
                                    this.blocks[i].z = 2 - oldy
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'down' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'up' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.x -= 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.x += 90
                                    }, this.delay)
                                }
                            }
                        }

                        //R'
                        else if (Operation === 'R_') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].x === 2) {
                                    this.transition = 0
                                    const oldz = this.blocks[i].z
                                    this.blocks[i].z = this.blocks[i].y
                                    this.blocks[i].y = 2 - oldz
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'up' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'down' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.x += 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.x -= 90
                                    }, this.delay)
                                }
                            }
                        }

                        //Face
                        else if (Operation === 'F') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].z === 0) {
                                    this.transition = 0
                                    const oldy = this.blocks[i].y
                                    this.blocks[i].y = this.blocks[i].x
                                    this.blocks[i].x = 2 - oldy
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'down' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'right' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'left' }
                                        else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'up' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.z -= 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.z += 90
                                    }, this.delay)
                                }
                            }
                        }

                        //F'
                        else if (Operation === 'F_') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].z === 0) {
                                    this.transition = 0
                                    const oldx = this.blocks[i].x
                                    this.blocks[i].x = this.blocks[i].y
                                    this.blocks[i].y = 2 - oldx
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'up' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'right' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'left' }
                                        else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'down' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.z += 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.z -= 90
                                    }, this.delay)
                                }
                            }
                        }

                        //Back
                        else if (Operation === 'B') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].z === 2) {
                                    this.transition = 0
                                    const oldx = this.blocks[i].x
                                    this.blocks[i].x = this.blocks[i].y
                                    this.blocks[i].y = 2 - oldx
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'down' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'right' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'left' }
                                        else if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'up' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.z += 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.z -= 90
                                    }, this.delay)
                                }
                            }
                        }

                        //B'
                        else if (Operation === 'B_') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].z === 2) {
                                    this.transition = 0
                                    const oldy = this.blocks[i].y
                                    this.blocks[i].y = this.blocks[i].x
                                    this.blocks[i].x = 2 - oldy
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'down' }
                                        else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'right' }
                                        else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'left' }
                                        else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'up' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.z -= 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.z += 90
                                    }, this.delay)
                                }
                            }
                        }

                        //Down
                        else if (Operation === 'D') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].y === 2) {
                                    this.transition = 0
                                    const oldz = this.blocks[i].z
                                    this.blocks[i].z = this.blocks[i].x
                                    this.blocks[i].x = 2 - oldz
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'left' }
                                        else if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'right' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.y -= 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.y += 90
                                    }, this.delay)
                                }
                            }
                        }

                        //D'
                        else if (Operation === 'D_') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                if (this.blocks[i].y === 2) {
                                    this.transition = 0
                                    const oldx = this.blocks[i].x
                                    this.blocks[i].x = this.blocks[i].z
                                    this.blocks[i].z = 2 - oldx
                                    for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                        if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'right' }
                                        else if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'face' }
                                        else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'back' }
                                        else if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'left' }
                                        this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                    }
                                    this.blocks[i].rotate.y += 90
                                    setTimeout(() => {
                                        this.transition = 0.2
                                        this.blocks[i].rotate.y -= 90
                                    }, this.delay)
                                }
                            }
                            // this.sleep(200)
                        }

                        //y'
                        else if (Operation === 'y_') {
                            for (let i = 0; i < this.blocks.length; i++) {

                                this.transition = 0
                                const oldz = this.blocks[i].z
                                this.blocks[i].z = this.blocks[i].x
                                this.blocks[i].x = 2 - oldz
                                for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                    if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'right' }
                                    else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'face' }
                                    else if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'back' }
                                    else if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'left' }
                                    this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                }
                                this.blocks[i].rotate.y -= 90
                                setTimeout(() => {
                                    this.transition = 0.2
                                    this.blocks[i].rotate.y += 90
                                }, this.delay)
                            }
                            // this.sleep(200)
                        }
                        //y
                        else if (Operation === 'y') {
                            for (let i = 0; i < this.blocks.length; i++) {

                                this.transition = 0
                                const oldx = this.blocks[i].x
                                this.blocks[i].x = this.blocks[i].z
                                this.blocks[i].z = 2 - oldx
                                for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                    if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'left' }
                                    else if (this.blocks[i].areas[j].direct === 'left') { this.blocks[i].areas[j].direct = 'back' }
                                    else if (this.blocks[i].areas[j].direct === 'right') { this.blocks[i].areas[j].direct = 'face' }
                                    else if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'right' }
                                    this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                }
                                this.blocks[i].rotate.y += 90
                                setTimeout(() => {
                                    this.transition = 0.2
                                    this.blocks[i].rotate.y -= 90
                                }, this.delay)
                            }
                            // this.sleep(200)
                        }

                        else if (Operation === 'x') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                this.transition = 0
                                const oldz = this.blocks[i].z
                                this.blocks[i].z = this.blocks[i].y
                                this.blocks[i].y = 2 - oldz
                                for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                    if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'up' }
                                    else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'face' }
                                    else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'back' }
                                    else if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'down' }
                                    this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                }
                                this.blocks[i].rotate.x += 90
                                setTimeout(() => {
                                    this.transition = 0.2
                                    this.blocks[i].rotate.x -= 90
                                }, this.delay)
                            }
                        }

                        else if (Operation === 'x_') {
                            for (let i = 0; i < this.blocks.length; i++) {
                                this.transition = 0
                                const oldy = this.blocks[i].y
                                this.blocks[i].y = this.blocks[i].z
                                this.blocks[i].z = 2 - oldy
                                for (let j = 0; j < this.blocks[i].areas.length; j++) {
                                    if (this.blocks[i].areas[j].direct === 'back') { this.blocks[i].areas[j].direct = 'down' }
                                    else if (this.blocks[i].areas[j].direct === 'up') { this.blocks[i].areas[j].direct = 'back' }
                                    else if (this.blocks[i].areas[j].direct === 'down') { this.blocks[i].areas[j].direct = 'face' }
                                    else if (this.blocks[i].areas[j].direct === 'face') { this.blocks[i].areas[j].direct = 'up' }
                                    this.blocks[i].areas[j].transform = this.getarea(this.blocks[i].areas[j].direct).transform
                                }
                                this.blocks[i].rotate.x -= 90
                                setTimeout(() => {
                                    this.transition = 0.2
                                    this.blocks[i].rotate.x += 90
                                }, this.delay)
                            }

                        }
                    },

                    getBlocks() {
                        for (let x = 0; x < this.count; x++) {
                            for (let y = 0; y < this.count; y++) {
                                for (let z = 0; z < this.count; z++) {
                                    const block = {
                                        x: x,
                                        y: y,
                                        z: z,
                                        rotate: {
                                            x: 0,
                                            y: 0,
                                            z: 0
                                        },
                                        areas: this.getareas(x, y, z)
                                    }
                                    this.blocks.push(block)
                                }
                            }

                        }
                    },

                    getareas(x, y, z) {
                        const areas = []
                        if (x === 0)
                            areas.push(this.getarea('left'))
                        if (x === this.count - 1)
                            areas.push(this.getarea('right'))
                        if (y === 0)
                            areas.push(this.getarea('up'))
                        if (y === this.count - 1)
                            areas.push(this.getarea('down'))
                        if (z === 0)
                            areas.push(this.getarea('face'))
                        if (z === this.count - 1)
                            areas.push(this.getarea('back'))
                        return areas

                    },

                    getarea(direct) {
                        const transform = {
                            up: 'translateY(-' + this.side / 2 + 'px) rotateX(90deg)',
                            down: 'translateY(' + this.side / 2 + 'px) rotateX(-90deg)',
                            left: 'translateX(-' + this.side / 2 + 'px) rotateY(-90deg)',
                            right: 'translateX(' + this.side / 2 + 'px) rotateY(90deg)',
                            face: 'translateZ(' + this.side / 2 + 'px)',
                            back: 'translateZ(-' + this.side / 2 + 'px)'
                        }

                        const colors = {
                            up: 'yellow',
                            down: 'white',
                            left: 'orange',
                            right: 'red',
                            face: 'blue',
                            back: 'green'
                        }

                        return {
                            direct: direct,
                            transform: transform[direct],
                            color: colors[direct],
                        }
                    },


                }
            })
        </script>
    </body>

    </html>
    <!-- vue3 -->